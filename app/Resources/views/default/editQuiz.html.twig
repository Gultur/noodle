{% extends 'layout.html.twig' %}

{% set page_title = 'Ã‰dition du Quiz' %}


{% block content %}

    <main>

        <p>Nom du Quiz : {{ quiz.name }}</p>

        <div id="leftDiv" class="col-md-6">
            {% for question in quiz.questions %}
                <div id={{ question.id }}>
                    <p>{{ question.question }}</p>
                    <button>Changer de zone</button>
                </div>
            {% endfor %}
        </div>


        <div id="rightDiv" class="col-md-6">
            {% for question in questions %}
                <div id={{ question.id }}>
                    <p>{{ question.question }}</p>
                    <button>Changer de zone</button>
                </div>
            {% endfor %}
        </div>
    </main>


    <script>
        $(document).ready(function () {
            const questionsInQuiz = $('#leftDiv');
            const questionsNotInQuiz = $('#rightDiv');

            $('#leftDiv button').each(function () {
                $(this).html('Retirer du quiz');
            });
            $('#rightDiv button').each(function () {
                $(this).html('Ajouter au quiz');
            });

            $('main button').click(function (event) {
                event.stopPropagation();
                let elementToMove = $(event.target).parent();
                let elementParent = $(elementToMove).parent();


                if ($(elementParent).attr('id') == 'leftDiv') {
                    console.log($(elementParent).attr('id'));
                    $(elementToMove).appendTo(questionsNotInQuiz);
                    $(event.target).html('Ajouter au quiz')
                    $.post( {{ quiz.id }}, {
                        "idRemoveQuestion": $(elementToMove).attr('id')
                    })
                }
                else {
                    console.log($(elementParent).attr('id'));
                    $(elementToMove).appendTo(questionsInQuiz);
                    $(event.target).html('Retirer du quiz')
                    $.post( {{ quiz.id }}, {
                        "idAddQuestion": $(elementToMove).attr('id')
                    })
                }


                console.log(elementToMove);
            })
        })
    </script>

{% endblock %}